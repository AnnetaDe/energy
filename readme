# ðŸš€ FastAPI Energy Consumption API

This is a **FastAPI-based API** for querying **energy consumption data**, supporting **date-based and hourly-based filtering**.

## ðŸ“Œ Features
- âœ… Retrieve all energy data
- âœ… Filter by date range
- âœ… Filter by date & time range
- âœ… Asynchronous PostgreSQL queries
- âœ… Deployable with Docker & Railway


## Public URL
     https://energy-production-3537.up.railway.app/

## ðŸ“‚ Project Structure

â”‚â”€â”€ app/
â”‚   â”œâ”€â”€ models.py          # SQLAlchemy models
â”‚   â”œâ”€â”€ database.py        # DB initialization
â”‚   â”œâ”€â”€ session.py         # DB session handling
â”‚   â”œâ”€â”€ schemas.py         # Pydantic schemas
â”‚   â”œâ”€â”€ parse_excel.py     # Excel file parsing
â”‚   â”œâ”€â”€ seed.py            # seed data
â”‚â”€â”€ main.py                # FastAPI application
â”‚â”€â”€ requirements.txt       # Python dependencies
â”‚â”€â”€ Dockerfile             # Docker configuration
â”‚â”€â”€ docker-compose.yml     # Docker Compose setup
â”‚â”€â”€ .env                   # Environment variables (not committed)
â”‚â”€â”€ README.md              # Documentation

### ðŸ“¦ Directories

- **app**: FastAPI application

## ðŸŽ¯ API Architecture


- **GET /energy**: Retrieve all energy data (no parameters)

- **GET /range_days**: Filter by date range (parameters: start_date, end_date)
test:
```bash```
# curl -X 'GET' "http://127.0.0.1:8000/range?start=2022-02-01&end=2022-02-10"      -H "accept: application/json"

response:
```json
[
  {
    "date": "2022-02-01",
    "consommation": 12345
  }
]
```

- **GET /range**: Filter by date & time range (parameters: start_date, end_date, start_hour, end_hour) 
default start_hour=00:00:00, end_hour=23:59:59
test:
```bash```
# curl -X 'GET' "http://127.0.0.1:8000/range?start_date=2022-02-01&start_hour=08:00:00&end_date=2022-02-02&end_hour=12:00:00" \
#      -H "accept: application/json"
response:
```json
[
  {
    "date": "2022-02-01",
    "heures": "00:00",
    "consommation": 12345
  }
]
## ðŸ”¥ Running the API Locally
1. **Clone the repository**:
        git clone 
        https://github.com/AnnetaDe/energy.git
2. **Install dependencies**:
        pip install -r requirements.txt
3. **Set up the database**:
        - Create a PostgreSQL database
        - Set the database URL in the `.env` file
4. **Set Up Environment Variables**:
        - Create a `.env` file in the project root
        - Add the following environment variables:
            - `DATABASE_URL`: PostgreSQL database URL
5. **Run the API**:
             uvicorn main:app --reload
6. **Access the API**:
        - Open `http://localhost:8000/docs` in your browser



## ðŸš¢ Deploying with Docker
1. **Build the Docker image**:
        docker build -t fastapi_app.






